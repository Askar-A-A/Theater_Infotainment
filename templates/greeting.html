{% load cms_tags menu_tags sekizai_tags %}
{% load static %}

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, height=device-height, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>{% placeholder "greeting_page_title" or %}Welcome - Opera House{% endplaceholder %}</title>
    <link rel="stylesheet" href="{% static 'css/font-awesome/all.min.css' %}">
    {% render_block "css" %}
    <style>
        /* Reset and base styles - Optimized for 1280x800 */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        html, body {
            margin: 0;
            padding: 0;
            width: 1280px;
            height: 800px; 
            max-height: 100%;
            color: #fff;
            font-family: Arial, sans-serif;
            line-height: 1.6;
            overflow: hidden;
        }

        /* Content wrapper - Fixed for 1280x800 */
        .content-wrapper {
            width: 1280px;
            height: 800px;
            position: relative;
            background: #000;
            overflow: hidden;
        }
        
        /* Background elements */
        .bg-pattern {
            display: none;
        }
        
        /* Greeting container - Optimized for 1280x800 */
        .greeting-container {
            width: 100%;
            height: 100%;
            display: block;
            text-align: center;
            padding: 0 1.5rem 0.75rem;
            padding-top: 50px;
            position: relative;
            z-index: 10;
            opacity: 1;
        }
        
        /* Center content using older-compatible approach */
        .greeting-content {
            position: absolute;
            top: 50%;
            left: 50%;
            width: 90%;
            margin-left: -45%; /* Half of width */
            margin-top: -20%; /* Approximate vertical centering */
        }
        
        /* Language selector - Fixed for 1280x800 */
        .language-selector {
            position: absolute;
            top: 0.75rem;
            left: 1.5rem;
            z-index: 10;
        }
        
        .language-dropdown {
            position: relative;
            display: inline-block;
        }
        
        .language-selected {
            color: #d4af37;
            background-color: #000;
            border: 1px solid #b8a062;
            padding: 10px 16px;
            font-size: 16px;
            cursor: pointer;
            display: block;
            min-width: 160px;
            border-radius: 5px;
            position: relative;
            z-index: 11;
            text-align: left;
        }
        
        .language-selected i {
            margin-left: 10px;
            float: right;
        }
        
        .language-options {
            position: absolute;
            top: 100%;
            left: 0;
            background-color: #000;
            border: 1px solid #b8a062;
            border-top: none;
            border-radius: 0 0 5px 5px;
            width: 100%;
            display: none;
            z-index: 10;
        }
        
        /* Show options when dropdown is open */
        .language-dropdown.open .language-options {
            display: block;
        }
        
        /* When dropdown is open, adjust the selected button's radius */
        .language-dropdown.open .language-selected {
            border-radius: 5px 5px 0 0;
        }
        
        .language-option {
            color: #cccccc;
            text-decoration: none;
            font-size: 16px;
            padding: 8px 15px;
            display: block;
            border-bottom: 1px solid #333;
        }
        
        .language-option:last-child {
            border-bottom: none;
        }
        
        .language-option:hover, .language-option.active {
            color: #d4af37;
            background-color: #111;
        }
        
        /* Logo container - Fixed for 1280x800 */
        .opera-logo {
            width: 160px;
            height: 160px;
            margin: 0 auto 0.75rem;
            position: relative;
            background-color: #fff;
            border-radius: 50%;
            padding: 12px;
            text-align: center;
        }
        
        .opera-logo img {
            max-width: 100%;
            max-height: 100%;
            display: block;
            margin: 0 auto;
        }
        
        /* Titles container - Fixed for 1280x800 */
        .welcome-titles-container {
            margin-bottom: 10px;
            text-align: center;
        }
        
        /* Content styling - Fixed for 1280x800 */
        .welcome-title {
            font-family: Georgia, serif;
            font-size: 2.8rem;
            margin-top: 0;
            margin-right: 10px;
            margin-bottom: 0;
            line-height: 1.3;
            color: #d4af37;
            text-shadow: none;
            font-style: normal;
            font-weight: 700;
            display: inline-block;
        }
        
        .welcome-subtitle {
            font-family: Georgia, serif;
            font-size: 2.6rem;
            margin-top: 0;
            margin-bottom: 0;
            line-height: 1.3;
            color: #d4af37;
            font-style: italic;
            font-weight: 400;
            display: inline-block;
        }
        
        /* Divider - Fixed for 1280x800 */
        .divider {
            width: 190px;
            height: 1px;
            background: #d4af37;
            margin: 5px auto 12px;
        }
        
        /* Welcome text frame - Fixed for 1280x800 */
        .welcome-text-frame {
            border: 1px solid #b8a062;
            padding: 0.75rem;
            margin-bottom: 15px;
            width: 90%;
            max-width: 650px;
            margin-left: auto;
            margin-right: auto;
            border-radius: 8px;
            background-color: #111;
        }
        
        .welcome-text {
            font-size: 1.2rem;
            line-height: 1.5;
            color: #dddddd;
            margin-bottom: 0;
            max-width: 100%;
            font-family: Arial, sans-serif;
            font-weight: 300;
        }
        
        .welcome-text p {
            margin: 0;
        }
        
        /* Enter button - Fixed for 1280x800 */
        .enter-button {
            display: inline-block;
            padding: 12px 50px;
            font-size: 1.25rem;
            line-height: 1.4;
            letter-spacing: 1.5px;
            margin-top: 5px;
            color: #d4af37;
            background-color: #000;
            border: 1px solid #d4af37;
            border-radius: 5px;
            cursor: pointer;
            text-decoration: none;
            position: relative;
            font-weight: 500;
            z-index: 100;
        }
        
        .enter-button:hover {
            color: #ffffff;
            border-color: #ffffff;
            background-color: #222;
        }
    </style>
    {% render_block "js" %}
    <script>
        function setLanguage(lang) {
            document.cookie = "django_language=" + lang + "; path=/; max-age=31536000";
            window.location.reload();
        }
        
        // Simplified initialization script - Android 6.0 compatible
        function initGreetingPage() {
            // Language dropdown functionality
            var languageDropdown = document.getElementById('languageDropdown');
            var selectedLanguageText = document.getElementById('selectedLanguage');
            
            // Set active language in dropdown
            var currentLang = null;
            var cookies = document.cookie.split('; ');
            for(var i=0; i < cookies.length; i++) {
                var c = cookies[i];
                if (c.indexOf('django_language=') === 0) {
                    currentLang = c;
                    break;
                }
            }
            var langValue = currentLang ? currentLang.split('=')[1] : 'en';
                
            var languageOptions = document.getElementsByClassName('language-option');
            var activeLanguageName = "Select Language";
            
            // Loop through options to find active language
            for (var i = 0; i < languageOptions.length; i++) {
                var option = languageOptions[i];
                var langCode = option.getAttribute('href').split("'")[1];
                if (langCode === langValue) {
                    option.className += ' active';
                    activeLanguageName = option.getAttribute('data-lang');
                }
            }
            
            // Set the selected language text
            if (selectedLanguageText) {
                selectedLanguageText.textContent = activeLanguageName;
            }
            
            // Toggle dropdown on click
            if (languageDropdown) {
                var languageSelectedButton = languageDropdown.getElementsByClassName('language-selected')[0];
                if (languageSelectedButton) {
                    languageSelectedButton.onclick = function(e) {
                        if (e.stopPropagation) e.stopPropagation();
                        
                        // Toggle the open class
                        if (languageDropdown.className.indexOf('open') === -1) {
                            languageDropdown.className += ' open';
                        } else {
                            languageDropdown.className = languageDropdown.className.replace(' open', '');
                        }
                        return false;
                    };
                }
            }
            
            // Close dropdown when clicking outside
            document.onclick = function() {
                if (languageDropdown && languageDropdown.className.indexOf('open') !== -1) {
                    languageDropdown.className = languageDropdown.className.replace(' open', '');
                }
            };
        }
        
        // Cross-browser way to initialize the page
        if (window.addEventListener) {
            window.addEventListener('load', initGreetingPage);
        } else if (window.attachEvent) {
            window.attachEvent('onload', initGreetingPage);
        } else {
            window.onload = initGreetingPage;
        }
    </script>
</head>

<body>
    {% cms_toolbar %}
    <div class="content-wrapper">
        <div class="greeting-container">
            <!-- Language selector -->
            <div class="language-selector">
                <div class="language-dropdown" id="languageDropdown">
                    <div class="language-selected">
                        <span id="selectedLanguage">Select Language</span>
                        <i class="fas fa-chevron-down"></i>
                    </div>
                    <div class="language-options">
                        <a href="javascript:setLanguage('en')" class="language-option" data-lang="English">English</a>
                        <a href="javascript:setLanguage('de')" class="language-option" data-lang="Deutsch">Deutsch</a>
                        <a href="javascript:setLanguage('fr')" class="language-option" data-lang="Français">Français</a>
                        <a href="javascript:setLanguage('it')" class="language-option" data-lang="Italiano">Italiano</a>
                        <a href="javascript:setLanguage('es')" class="language-option" data-lang="Español">Español</a>
                        <a href="javascript:setLanguage('ru')" class="language-option" data-lang="Русский">Русский</a>
                        <a href="javascript:setLanguage('zh')" class="language-option" data-lang="中文">中文</a>
                        <a href="javascript:setLanguage('ja')" class="language-option" data-lang="日本語">日本語</a>
                        <a href="javascript:setLanguage('ko')" class="language-option" data-lang="한국어">한국어</a>
                        <a href="javascript:setLanguage('ar')" class="language-option" data-lang="العربية">العربية</a>
                    </div>
                </div>
            </div>
            
            <!-- Content container -->
            <div class="greeting-content">
                <!-- Opera logo placeholder -->
                <div class="opera-logo">
                    {% placeholder "opera_logo" %}
                </div>
                
                <div class="welcome-titles-container">
                    <h1 class="welcome-title">
                        {% placeholder "greeting_title" or %}Welcome{% endplaceholder %}
                    </h1>
                    
                    <h2 class="welcome-subtitle">
                        {% placeholder "theater_name" or %}Theater Name{% endplaceholder %}
                    </h2>
                </div>
                
                <div class="divider"></div>
                
                <!-- Welcome text frame -->
                <div class="welcome-text-frame">
                    <div class="welcome-text">
                        {% placeholder "greeting_text" or %}
                        <p>
                            Experience extraordinary performances in one of the world's most beautiful opera houses. 
                            Our digital infotainment system offers information about today's performance, upcoming events, 
                            and the rich history of our celebrated institution.
                        </p>
                        {% endplaceholder %}
                    </div>
                </div>
                
                <a href="/sponsors/" class="enter-button">
                    {% placeholder "enter_button_text" or %}ENTER{% endplaceholder %}
                </a>
            </div>
        </div>
    </div>
</body>
</html>
